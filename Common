   FUNCTION generatereferenceno (p_transactionname IN VARCHAR2)
      RETURN VARCHAR2
   AS
      strsequencename   VARCHAR2 (20);
      strrefcode        VARCHAR2 (2);
      strrefno          VARCHAR (10);
      strnextvalue      VARCHAR2 (10);
      ref_cur           txn_cur;
   BEGIN
      /*IF p_transactionName = 'FT' OR p_transactionName = 'LPP' THEN
          strRefCode := 'CI';
      ELSIF p_transactionName = 'TP' THEN
          strRefCode := 'CT';
      ELSIF p_transactionName = 'DD' THEN
          strRefCode := 'CD';
      ELSIF p_transactionName = 'BP' THEN
          strRefCode := 'CB';
      ELSIF p_transactionName = 'MP' THEN
          strRefCode := 'CK';
      ELSIF p_transactionName = 'PS' THEN
          strRefCode := 'CS';
      END IF;
      --strSequenceName := 'R' || strRefCode || 'REF.nextval';*/
      --strsequencename := 'R' || TRIM (p_transactionname) || 'REF.nextval';
      --Start of code added for Corporate fee transactions
      IF p_transactionName = 'FEE' THEN
        strRefCode := 'CU';
/* if condition 'SARALMTOPUP' is added on 12-Mar-15 for CR No:CINB0125 by veeraraju */
      ELSIF p_transactionName = 'SARALMTOPUP' THEN
        strRefCode := 'CV';        
      ELSE
        strRefCode := trim(p_transactionName);
      END IF;
      
      strSequenceName := 'R' || strRefCode || 'REF.nextval';
      
      --End of code added for Corporate fee transactions

      OPEN ref_cur
      FOR 'select '|| strSequenceName ||' from dual';
      LOOP
         FETCH ref_cur
          INTO strnextvalue;
         EXIT WHEN ref_cur%NOTFOUND;
         IF strRefCode IN ('CK','IU','CR')  THEN 
            strRefNo := strRefCode || CHR(SUBSTR(strNextValue,1,2)) || SUBSTR(strNextValue,3);
         ELSIF strRefCode in ('CX','CN','CI','CT')  THEN 
            strRefNo := strRefCode || LPAD(FN_ALPHA_NUM_REF_NO(FLOOR(strNextValue/10)),7,'0') || SUBSTR(strNextValue,-1);
         ELSE
            strRefNo := strRefCode || LPAD(strNextValue,8,'0');
         END IF;         
         --strrefno := TRIM (p_transactionname) || strnextvalue;
      END LOOP;
      RETURN strrefno;
   END generatereferenceno;
   
