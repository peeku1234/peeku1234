import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;
import java.io.*;
import java.nio.charset.StandardCharsets;
import java.util.Arrays;
import java.util.List;

public class YourServiceTest {

    @Test
    void testGetSampleFileDataThrowsMicroServiceExceptionOnIOException() {
        YourService service = new YourService() {
            @Override
            public byte[] getSampleFileData(List<String> configurationString, String fileType) {
                byte[] byteData = new byte[0];
                try (OutputStream outputStream = new OutputStream() {
                    @Override
                    public void write(int b) throws IOException {
                        throw new IOException("Simulated IO failure");
                    }
                }) {
                    outputStream.write(configurationString.get(0).getBytes(StandardCharsets.UTF_8));
                    byteData = ((ByteArrayOutputStream) outputStream).toByteArray();
                } catch (IOException ioException) {
                    throw new MicroServiceException("YBM003");
                }
                return byteData;
            }
        };

        List<String> data = Arrays.asList("Test Line 1", "Test Line 2");
        String fileType = "SOME_TYPE";

        MicroServiceException exception = assertThrows(MicroServiceException.class, () -> {
            service.getSampleFileData(data, fileType);
        });

        assertEquals("YBM003", exception.getMessage());
    }
}
